{% extends 'layout/base.html' %}

{% block title %}Thông tin Bác sĩ - {{ doctor.first_name }} {{ doctor.last_name }}{% endblock %}
{% block search_bar %}{% endblock %}

{% block content %}
<div class="container my-5">
  <div class="row">
    <div class="col-lg-8 offset-lg-2">
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <div class="row">
            <div class="col-md-4 text-center">
              <img src="{{ doctor.avatar or url_for('static', filename='images/default_avatar.jpg') }}"
                   class="rounded-circle mb-3" alt="Doctor Avatar"
                   style="width: 180px; height: 180px; object-fit: cover; border: 4px solid #007bff;">
              <h3 class="mb-2">{{ doctor.first_name }} {{ doctor.last_name }}</h3>
              <a href="{{ url_for('book_appointment', doctor_id=doctor.id) }}"
                 class="btn btn-primary btn-lg mt-3 w-100">
                <i class="fas fa-calendar-check me-2"></i>Đặt lịch ngay
              </a>
            </div>
            <div class="col-md-8">
              <h4 class="text-primary border-bottom pb-2 mb-3">Thông tin chi tiết</h4>

              {% if doctor.doctor %}
              <p>
                <i class="fas fa-stethoscope fa-fw text-muted me-2"></i>
                <strong>Chuyên khoa:</strong>
                {% if doctor.doctor.doctor_departments %}
                {{ doctor.doctor.doctor_departments | map(attribute='department.name') | join(', ') }}
                {% else %}
                <span class="text-muted">Chưa cập nhật</span>
                {% endif %}
              </p>

              <p>
                <i class="fas fa-hospital fa-fw text-muted me-2"></i>
                <strong>Nơi công tác:</strong>
                {% if doctor.doctor.medical_center %}
                {{ doctor.doctor.medical_center.name }}
                {% else %}
                <span class="text-muted">Chưa cập nhật</span>
                {% endif %}
              </p>

              {% if doctor.doctor.description %}
              <h4 class="text-primary border-bottom pb-2 mt-4 mb-3">Kinh nghiệm</h4>
              <p style="white-space: pre-wrap;">{{ doctor.doctor.description }}</p>
              {% endif %}

              {% else %}
              <div class="alert alert-warning">
                Bác sĩ chưa cập nhật thông tin chuyên môn.
              </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      <div class="text-center mt-4">
        <a href="{{ url_for('search_doctor') }}" class="btn btn-secondary">
          <i class="fas fa-arrow-left me-2"></i>Quay lại danh sách bác sĩ
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}